{
  "name": "PWA launches on configured workspace",
  "description": "Validates that a PWA with custom app_id (e.g., FFPWA-01J5M6WBDDJQFCPBSAM7RRQ2BE) launches on its configured workspace 52",
  "tags": ["integration", "workspace-assignment", "pwa"],
  "priority": "P2",
  "timeout": 20000,
  "actions": [
    {
      "type": "launch_app",
      "params": {
        "app_name": "youtube-music",
        "sync": true
      }
    },
    {
      "type": "wait_event",
      "params": {
        "event_type": "window",
        "timeout": 15000,
        "criteria": {
          "change": "new"
        }
      }
    },
    {
      "type": "await_sync",
      "params": {
        "marker": "pwa_window_ready"
      }
    },
    {
      "type": "validate_workspace_assignment",
      "params": {
        "app_name": "youtube-music",
        "expected_workspace": 52
      }
    }
  ],
  "expectedState": {
    "workspaces": [
      {
        "num": 52,
        "windows": [
          {
            "name": "YouTube Music"
          }
        ]
      }
    ],
    "focusedWorkspace": 52,
    "assertions": [
      {
        "path": "workspaces[?num==52].windows[0].app_id",
        "expected": "FFPWA-*",
        "operator": "matches"
      }
    ]
  }
}
