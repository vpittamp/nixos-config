{
  "name": "Feature 072: Filter to multi-digit workspace in unified switcher",
  "description": "User Story 2: Type digits '2' then '3' in workspace mode to filter preview to workspace 23",
  "actions": [
    {
      "type": "send_ipc_sync",
      "params": {
        "ipc_command": "[app_id=\".*\"] kill"
      },
      "description": "Clean slate: Kill all existing windows"
    },
    {
      "type": "sync",
      "description": "Wait for cleanup to complete"
    },
    {
      "type": "send_ipc_sync",
      "params": {
        "ipc_command": "workspace 5"
      },
      "description": "Switch to workspace 5"
    },
    {
      "type": "launch_app_sync",
      "params": {
        "app_name": "alacritty"
      },
      "description": "Launch Alacritty on WS 5"
    },
    {
      "type": "send_ipc_sync",
      "params": {
        "ipc_command": "workspace 23"
      },
      "description": "Switch to workspace 23"
    },
    {
      "type": "launch_app_sync",
      "params": {
        "app_name": "firefox"
      },
      "description": "Launch Firefox on WS 23 (window 1/3)"
    },
    {
      "type": "launch_app_sync",
      "params": {
        "app_name": "alacritty"
      },
      "description": "Launch Alacritty on WS 23 (window 2/3)"
    },
    {
      "type": "launch_app_sync",
      "params": {
        "app_name": "alacritty"
      },
      "description": "Launch Alacritty on WS 23 (window 3/3)"
    },
    {
      "type": "send_ipc_sync",
      "params": {
        "ipc_command": "workspace 30"
      },
      "description": "Switch to workspace 30"
    },
    {
      "type": "launch_app_sync",
      "params": {
        "app_name": "alacritty"
      },
      "description": "Launch Alacritty on WS 30"
    }
  ],
  "expectedState": {
    "mode": "partial",
    "windowCount": 5,
    "workspaces": [
      {
        "num": 5,
        "windows": [
          { "app_id": "Alacritty" }
        ]
      },
      {
        "num": 23,
        "windows": [
          { "app_id": "firefox" },
          { "app_id": "Alacritty" },
          { "app_id": "Alacritty" }
        ]
      },
      {
        "num": 30,
        "windows": [
          { "app_id": "Alacritty" }
        ]
      }
    ]
  },
  "notes": [
    "User Story 2: After workspace mode entry shows all windows (US1), typing '2' then '3' should filter to workspace 23",
    "Expected preview after typing '23': type='workspace', workspace_num=23, 3 windows (firefox + 2x Alacritty), visible=true",
    "Manual test: Enter workspace mode (CapsLock/Ctrl+0), verify all-windows preview appears, type '2' then '3', verify preview filters to WS 23",
    "Performance target: <50ms per keystroke update",
    "Edge case validation: Ensure '2' alone doesn't show WS 2, but waits for completion (either Enter or timeout)",
    "Note: This test validates the setup state (multiple workspaces including multi-digit WS 23). Actual filtering behavior requires manual validation."
  ]
}
