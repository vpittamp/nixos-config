{
  "name": "Feature 072: Filter to single-digit workspace in unified switcher",
  "description": "User Story 2: Type single digit '5' in workspace mode to filter preview to workspace 5 only",
  "actions": [
    {
      "type": "send_ipc_sync",
      "params": {
        "ipc_command": "[app_id=\".*\"] kill"
      },
      "description": "Clean slate: Kill all existing windows"
    },
    {
      "type": "sync",
      "description": "Wait for cleanup to complete"
    },
    {
      "type": "send_ipc_sync",
      "params": {
        "ipc_command": "workspace 3"
      },
      "description": "Switch to workspace 3"
    },
    {
      "type": "launch_app_sync",
      "params": {
        "app_name": "firefox"
      },
      "description": "Launch Firefox on WS 3"
    },
    {
      "type": "send_ipc_sync",
      "params": {
        "ipc_command": "workspace 5"
      },
      "description": "Switch to workspace 5"
    },
    {
      "type": "launch_app_sync",
      "params": {
        "app_name": "alacritty"
      },
      "description": "Launch Alacritty on WS 5 (window 1/2)"
    },
    {
      "type": "launch_app_sync",
      "params": {
        "app_name": "alacritty"
      },
      "description": "Launch Alacritty on WS 5 (window 2/2)"
    },
    {
      "type": "send_ipc_sync",
      "params": {
        "ipc_command": "workspace 7"
      },
      "description": "Switch to workspace 7"
    },
    {
      "type": "launch_app_sync",
      "params": {
        "app_name": "alacritty"
      },
      "description": "Launch Alacritty on WS 7"
    }
  ],
  "expectedState": {
    "mode": "partial",
    "windowCount": 4,
    "workspaces": [
      {
        "num": 3,
        "windows": [
          { "app_id": "firefox" }
        ]
      },
      {
        "num": 5,
        "windows": [
          { "app_id": "Alacritty" },
          { "app_id": "Alacritty" }
        ]
      },
      {
        "num": 7,
        "windows": [
          { "app_id": "Alacritty" }
        ]
      }
    ]
  },
  "notes": [
    "User Story 2: After workspace mode entry shows all windows (US1), typing '5' should filter preview to show only workspace 5",
    "Expected preview: type='workspace', workspace_num=5, 2 windows (both Alacritty), visible=true",
    "Manual test: Enter workspace mode (CapsLock/Ctrl+0), verify all-windows preview appears, type '5', verify preview filters to WS 5 only",
    "Performance target: <50ms from keystroke to preview update",
    "Note: This test validates the setup state (multiple workspaces with windows). Actual filtering behavior requires manual validation until daemon supports simulated keystrokes."
  ]
}
