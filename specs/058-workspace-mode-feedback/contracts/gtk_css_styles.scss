// GTK CSS Contract: Workspace Button Pending State
// Feature 058: Workspace Mode Visual Feedback
// Catppuccin Mocha color palette with pending highlight

/* Catppuccin Mocha color palette */
$base: #1e1e2e;
$surface0: #313244;
$overlay0: #6c7086;
$text: #cdd6f4;
$subtext0: #a6adc8;
$yellow: #f9e2af;   /* NEW: Pending state color */
$blue: #89b4fa;     /* Focused state */
$mauve: #cba6f7;    /* Visible state */
$red: #f38ba8;      /* Urgent state */

// EXISTING STATES (Feature 057 baseline)

/* Normal state: Flat dark background with subtle border */
.workspace-button {
  background: rgba(30, 30, 46, 0.3);
  padding: 3px 6px;
  border-radius: 4px;
  border: 1px solid rgba(108, 112, 134, 0.3);
  box-shadow: none;
  min-width: 0;
  transition: all 0.2s;
}

.workspace-button:hover {
  background: rgba(137, 180, 250, 0.15);
  border: 1px solid rgba(137, 180, 250, 0.4);
}

/* Focused: Blue accent (user is currently on this workspace) */
.workspace-button.focused {
  background: rgba(137, 180, 250, 0.3);
  border: 1px solid rgba(137, 180, 250, 0.6);
}

/* Visible on other monitor: Lighter blue */
.workspace-button.visible:not(.focused) {
  background: rgba(137, 180, 250, 0.12);
  border: 1px solid rgba(137, 180, 250, 0.35);
}

/* Urgent: Red accent (window demands attention) */
.workspace-button.urgent {
  background: rgba(243, 139, 168, 0.25);
  border: 1px solid rgba(243, 139, 168, 0.5);
}

/* Empty: Dimmed appearance */
.workspace-button.empty {
  opacity: 0.3;
}

.workspace-button.empty:hover {
  opacity: 0.6;
}

// NEW STATE (Feature 058)

/* Pending: Yellow/peach accent (user will navigate here when pressing Enter) */
.workspace-button.pending {
  background: rgba(249, 226, 175, 0.25);  /* Catppuccin Mocha Yellow */
  border: 1px solid rgba(249, 226, 175, 0.7);
  transition: all 0.2s;  /* Smooth transitions */

  // Icon glow for additional visual emphasis
  .workspace-icon-image {
    -gtk-icon-shadow: 0 0 8px rgba(249, 226, 175, 0.8);
  }

  // Number label emphasis
  .workspace-number {
    color: $yellow;
    font-weight: 600;
  }
}

// MUTUAL EXCLUSION: Pending overrides focused
// (Edge case: User types digits while already on that workspace)
.workspace-button.pending.focused {
  background: rgba(249, 226, 175, 0.25);  /* Pending takes visual priority */
  border: 1px solid rgba(249, 226, 175, 0.7);

  .workspace-icon-image {
    -gtk-icon-shadow: 0 0 8px rgba(249, 226, 175, 0.8);  /* Pending icon glow */
  }

  .workspace-number {
    color: $yellow;  /* Pending color overrides blue focused color */
    font-weight: 600;
  }
}

// PENDING + URGENT: Both states can coexist
// Pending takes button background priority, urgent shows badge overlay
.workspace-button.pending.urgent {
  background: rgba(249, 226, 175, 0.25);  /* Pending background */
  border: 1px solid rgba(249, 226, 175, 0.7);  /* Pending border */
  /* Urgent state shown via notification badge overlay (not button background) */
}

// NOTIFICATION BADGE (NEW: User Story 3)
// Apple-style circular red dot in top-right corner using overlay widget

/* Badge container: Position in top-right corner */
.notification-badge-container {
  margin: 2px 2px 0 0;  /* Slight offset from edge */
}

/* Badge dot: Perfect 8px circle with white border */
.notification-badge {
  min-width: 8px;
  min-height: 8px;
  background: #f38ba8;  /* Catppuccin Mocha Red */
  border: 2px solid white;
  border-radius: 50%;  /* Perfect circle */
  opacity: 1;
  transition: opacity 0.2s;  /* Smooth fade-out when urgent clears */
}

/* Badge visibility controlled by Yuck :visible urgent attribute */
/* No CSS hover or interaction states needed (badge is pure indicator) */

// ACCESSIBILITY: Ensure sufficient contrast ratio
// WCAG AA minimum 4.5:1 contrast ratio for text
// Yellow (#f9e2af) on dark base (#1e1e2e) = ~11:1 contrast ratio ✅

// PERFORMANCE: GTK CSS transition on opacity/background
// Expected frame time: <16ms (60fps)
// Tested on: GTK 3.24+, Eww 0.4.0+

// CONSTRAINTS (Feature 057 learnings):
// ❌ NO transform properties (GTK limitation)
// ❌ NO filter properties (GTK limitation)
// ❌ NO backdrop-filter (GTK limitation)
// ❌ NO @keyframes animations (GTK limitation)
// ❌ NO display: flex (use box in Yuck instead)
// ✅ YES opacity transitions (supported)
// ✅ YES background/border transitions (supported)
// ✅ YES box-shadow (supported with performance cost)
// ✅ YES -gtk-icon-shadow (GTK-specific property)

